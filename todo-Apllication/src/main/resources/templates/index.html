<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ToDo Application</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>


   <div class="todo-container">
       <h4>
           <i class="bi bi-calendar-check"></i>To-Do List
           <button type="button" class="toggle-btn" onclick="toggleMode()">ðŸŒ™</button>

       </h4>

       <form th:action="@{/add}" method="post" class="d-flex mb-4 mt-4">
             <input type="text" name="title" placeholder="Add Your Task" class="form-control todo-input" required >
           <button class="btn btn-add">ADD </button>
       </form>

       <div th:if="${#lists.isEmpty(todos)}" class="text-center text-muted">
           No To-Do Found
       </div>

       <div class="todo-list">
           <div th:each=" todo: ${todos}" class="todo-item">
               <div class="d-flex align-items-center">
                   <a th:href="@{/update/{id}(id=${todo.id})}" >
                       <i class="bi" th:classappend="${todo.completed ? 'bi-check-circle-fill check-icon' : 'bi-circle unchecked-icon'}"></i>
                   </a>
                   <span th:text="${todo.title}" th:classappend="${todo.completed} ? 'completed':''" class="todo-text" ></span>
               </div>
               <a th:href="@{/delete/{id}(id=${todo.id})}" class="delete-btn">
                   <i class="bi bi-trash3"></i>
               </a>
           </div>
       </div>



   </div>


   <script>
       // Dark Mode toggle with localStorage
       function toggleMode() {
         document.body.classList.toggle("dark-mode");

         // Save state
         if (document.body.classList.contains("dark-mode")) {
           localStorage.setItem("theme", "dark");
         } else {
           localStorage.setItem("theme", "light");
         }
       }

       // Page load par check karo
       window.onload = function() {
         const theme = localStorage.getItem("theme");
         if (theme === "dark") {
           document.body.classList.add("dark-mode");
         }
       }
   </script>





   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>
</html>